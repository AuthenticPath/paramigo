<!-- FILE: templates/index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paramigo</title>

    <!-- Global style sheet (modernised in the next step) -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
  </head>

  <body>
    <!-- â”€â”€â”€â”€â”€ LOGIN GATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="login-container" class="page-container">
      <h1>Welcome to Paramigo</h1>
      <p>Please sign in to continue.</p>
      <button id="login-btn">Sign in with Google</button>
    </div>

    <!-- â”€â”€â”€â”€â”€ MAIN APP SHELL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="app-container" style="display: none">
      <!-- Top bar -->
      <header class="page-container" style="padding-bottom: 0">
        <p>
          Hello, <span id="user-name"></span>!
          <a href="#" id="logout-btn" style="margin-left: 1em">(Sign Out)</a>
          <a href="/onboarding" id="change-style-link" style="margin-left: 1em"
            >(Change Learning Style)</a
          >
        </p>
      </header>

      <!-- Library / Topics -->
      <main id="lesson-library-view" class="page-container">
        <!-- Controls injected immediately for convenience -->
        <div class="library-controls" style="margin-bottom: 1em">
          <button id="create-topic-btn" class="btn-primary">
            + Create Topic
          </button>
          <button id="library-flashcards-btn" class="btn-outline">
            Generate Flashcards
          </button>
          <button id="final-quiz-button" class="btn-outline">
            Take a Final Quiz
          </button>
        </div>

        <!-- Topic list & history will be rendered by JS -->
        <div id="library-dynamic-area"></div>
      </main>

      <!-- Topic detail -->
      <main
        id="topic-detail-view"
        class="page-container"
        style="display: none"
      ></main>

      <!-- Active lesson -->
      <main
        id="lesson-taking-view"
        class="page-container"
        style="display: none"
      ></main>

      <!-- Results / review -->
      <main
        id="results-view"
        class="page-container"
        style="display: none"
      ></main>

      <!-- Final quiz workflow -->
      <main
        id="final-quiz-view"
        class="page-container"
        style="display: none"
      ></main>
    </div>

    <!-- â”€â”€â”€â”€â”€ FLOATING AI-TUTOR CHAT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <button id="tutor-button" style="display: none" onclick="toggleTutor()">
      Ask Tutor ðŸ’¬
    </button>

    <div id="tutor-chat-container">
      <div id="tutor-chat-header">
        <span>AI Tutor</span>
        <button id="tutor-close-btn" onclick="toggleTutor()">Ã—</button>
      </div>
      <div id="tutor-chat-history"></div>
      <div id="tutor-input-area">
        <input id="tutor-input" placeholder="Ask a question..." />
        <button id="tutor-send-btn" onclick="sendTutorMessage()">âž¤</button>
      </div>
    </div>

    <!-- â”€â”€â”€â”€â”€ FINAL-QUIZ TOPIC-PICKER MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="final-quiz-modal" class="modal-backdrop">
      <div class="modal-content">
        <h2>Create a Cumulative Quiz</h2>
        <p>
          Select the topics you want to include and the total number of
          questions for your quiz.
        </p>

        <div
          style="
            margin-bottom: 1em;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5em;
          "
        >
          <label>
            <input type="checkbox" id="select-all-topics-checkbox" />
            <strong>Select All / Deselect All</strong>
          </label>
        </div>

        <div id="topic-selection-list">
          <!-- Topic check-boxes injected by JS -->
        </div>

        <div>
          <label for="question-count-input">Number of Questions:</label>
          <input
            type="number"
            id="question-count-input"
            value="10"
            min="5"
            max="20"
            style="width: 60px"
          />
        </div>

        <div style="margin-top: 2em">
          <button id="generate-final-quiz-btn">Generate Quiz</button>
          <button id="cancel-final-quiz-btn" style="background-color: #6c757d">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- â”€â”€â”€â”€â”€ FLASHCARD TOPIC-PICKER MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div id="flashcard-topic-modal" class="modal-backdrop">
      <div class="modal-content">
        <h2>Generate Flashcards</h2>
        <p>Select the topics you want to include in your flashcard deck.</p>

        <div
          style="
            margin-bottom: 1em;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5em;
          "
        >
          <label>
            <input type="checkbox" id="select-all-flashcard-topics-checkbox" />
            <strong>Select All / Deselect All</strong>
          </label>
        </div>

        <div id="flashcard-topic-selection-list">
          <!-- Topic check-boxes injected by JS -->
        </div>

        <div style="margin-top: 2em">
          <button id="generate-flashcards-btn-modal">
            Generate Flashcards
          </button>
          <button
            id="cancel-flashcards-btn-modal"
            style="background-color: #6c757d"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- â”€â”€â”€â”€â”€ APP SCRIPTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <!-- All interactive logic now lives in static/js/main.js -->
    <script
      type="module"
      src="{{ url_for('static', filename='js/main.js') }}"
    ></script>
  </body>
</html>
